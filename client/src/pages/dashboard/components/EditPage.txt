import React from 'react'
import { connect } from 'react-redux'
import { editExpense, removeExpense } from '../actions/expenses'
import ExpenseForm from './ExpenseForm'

// const EditPage = (props) => {
//     console.log("edit page")
//     const id = props.match.params.id.substring(2, props.match.params.id.length)
//     return (
//         <div>
//             <ExpenseForm
//              expense = {props.expense}
//              onSubmit = {(expense)=>{
//                 props.dispatch(editExpense(id, expense))
//                 props.history.push("/")
//             }}/>
//             <button onClick={() => {
//                 props.dispatch(removeExpense(id))
//                 props.history.push('/')
//             }}>Remove</button>
//         </div>
//     )
// }

class EditPage extends React.Component{
    constructor(props){
        super(props)
        const id = this.props.expense.id
    }
    render(){
        return (
            <div>
                <ExpenseForm
                 expense = {this.props.expense}
                 onSubmit = {(expense)=>{
                    this.props.dispatch(editExpense(this.id, expense))
                    this.props.history.push("/")
                }}/>
                <button onClick={() => {
                    this.props.dispatch(removeExpense(this.id))
                    this.props.history.push('/')
                }}>Remove</button>
            </div>
        )
    }
}





const mapStateToProps = (state, props) => {
 
    const requiredMatch = props.match.params.id.substring(2, props.match.params.id.length)
    let expense = {};

    for (let i = 0; i < state.expenses.length; i++) {

        if (state.expenses[i].id ===requiredMatch) {
            expense = state.expenses[i]
        }
      
    }

    return {
        expense: expense
    }
}

export default connect(mapStateToProps)(EditPage)



